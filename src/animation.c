#include <stdio.h>
#include <stddef.h>
#include "animation.h"
#include "graphics.h"

void printSprite16(const unsigned char sprite[16][16]) {
    for(int r = 0; r < 16; r++){
        for(int c = 0; c < 16; c++){
            unsigned char px = sprite[r][c];
            if(px == 0) printf("  ");   // två tomrum = genomskinlig
            else printf("██");         // rita pixlar
        }
        printf("\n");
    }
}
/* Enkel 16x16 "pig" sprite (används av drawPig). */
static const unsigned char PIG[16][16] = {
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,1,1,2,3,4,1,1,1,1,1,5,6,7,1,1},
    {1,1,1,8,9,10,11,12,13,14,15,16,17,18,1,1},
    {1,1,1,19,20,21,22,23,23,24,25,26,27,28,1,1},
    {1,1,1,29,30,31,32,32,32,32,32,32,33,34,1,1},
    {1,1,1,35,36,37,38,32,32,32,39,32,32,32,1,1},
    {1,1,1,40,32,32,41,38,32,42,43,32,32,44,1,1},
    {1,1,45,39,32,32,19,46,47,48,49,32,25,50,51,1},
    {1,1,52,32,32,32,53,54,55,56,57,32,58,59,60,1},
    {1,1,1,61,62,38,63,64,65,66,67,68,35,69,1,1},
    {1,1,1,70,71,72,32,73,74,75,76,77,78,79,1,1},
    {1,1,1,1,80,81,82,83,32,32,10,84,85,1,1,1},
    {1,1,1,1,1,1,86,87,88,88,88,1,1,1,1,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
};

/* Enkel rityta för PIG: 0 = transparent (hoppa), >0 ritas med färgvärdet som färg. */
void drawPig(int x, int y)
{
    for (int row = 0; row < 16; row++) {
        for (int col = 0; col < 16; col++) {
            unsigned char v = PIG[row][col];
            if (v == 0) continue;
            putPixel(x + col, y + row, v);
        }
    }
}

/* Om du har fler knappar/funktioner: definiera dem som funktioner.
   Ta bort alla anrop som tidigare låg utanför funktioner (top-level). */

static const unsigned char heart[16][16] = {
    {0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0},
    {0,1,2,3,1,0,0,1,3,2,1,0,0,0,0,0},
    {1,3,3,3,2,1,1,2,3,3,3,2,1,0,0,0},
    {1,3,3,3,3,3,3,3,3,3,3,3,2,1,0,0},
    {1,3,3,3,3,3,3,3,3,3,3,3,3,2,1,0},
    {0,1,3,3,3,3,3,3,3,3,3,3,3,3,1,0},
    {0,0,1,3,3,3,3,3,3,3,3,3,3,3,1,0},
    {0,0,1,3,3,3,3,3,3,3,3,3,3,3,1,0},
    {0,0,0,1,3,3,3,3,3,3,3,3,3,1,0,0},
    {0,0,0,1,3,3,3,3,3,3,3,3,3,1,0,0},
    {0,0,0,0,1,3,3,3,3,3,3,3,1,0,0,0},
    {0,0,0,0,1,3,3,3,3,3,3,3,1,0,0,0},
    {0,0,0,0,0,1,3,3,3,3,3,1,0,0,0,0},
    {0,0,0,0,0,1,3,3,3,3,3,1,0,0,0,0},
    {0,0,0,0,0,0,1,3,3,3,1,0,0,0,0,0},
    {0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0}
};

void drawHeart(int x, int y) {
    for (int row = 0; row < 16; row++) {
        for (int col = 0; col < 16; col++) {
            unsigned char color = heart[row][col];
            if (color != 0) {
                putPixel(x + col, y + row, color);
            }
        }
    }
}


static const unsigned char BTN_PLAY_UP[16][16] = {
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},

{1,3,2,5,2,2,5,2,2,5,2,2,2,3,1,0}, // PLAY text row 5
{1,3,2,5,5,2,2,5,2,5,2,2,2,3,1,0},
{1,3,2,5,2,2,2,5,2,5,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,5,5,2,2,3,1,0},

{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,4,4,4,4,4,4,4,4,4,4,4,3,1,0}, // bottom shadow
{0,1,4,4,4,4,4,4,4,4,4,4,4,1,0,0},
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

static const unsigned char BTN_PLAY_DOWN[16][16] = {
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,5,2,2,5,2,2,5,2,2,2,3,1,0},
{1,3,2,5,5,2,2,5,2,5,2,2,2,3,1,0},
{1,3,2,5,2,2,2,5,2,5,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,5,5,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{0,1,4,4,4,4,4,4,4,4,4,4,4,1,0,0},
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

void drawButton16(int x, int y, const unsigned char btn[16][16]) {
    for (int row = 0; row < 16; row++) {
        for (int col = 0; col < 16; col++) {
            unsigned char px = btn[row][col];
            if (px != 0) putPixel(x + col, y + row, px);
        }
    }
}

void drawPlayButtonUp(int x, int y) { drawButton16(x, y, BTN_PLAY_UP); }
void drawPlayButtonDown(int x, int y) { drawButton16(x, y, BTN_PLAY_DOWN); }


static const unsigned char BTN_STOP_DOWN[16][16] = {
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,5,5,5,2,2,2,5,5,5,2,3,1,0},
{1,3,2,5,2,5,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,2,5,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,2,5,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,5,5,2,2,2,5,5,5,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{0,1,4,4,4,4,4,4,4,4,4,4,4,1,0,0},
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

static const unsigned char BTN_PAUSE_DOWN[16][16] = {
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,5,2,5,2,2,2,5,2,5,5,3,1,0},
{1,3,2,5,5,2,2,2,2,5,2,2,2,3,1,0},
{1,3,2,5,2,2,2,2,2,5,2,2,2,3,1,0},
{1,3,2,5,2,2,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,2,2,2,2,2,5,5,5,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{0,1,4,4,4,4,4,4,4,4,4,4,4,1,0,0},
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

static const unsigned char BTN_STOP_UP[16][16] = {
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},

{1,3,2,5,5,5,2,2,2,5,5,5,2,3,1,0}, // STOP text
{1,3,2,5,2,5,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,2,5,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,2,5,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,5,5,2,2,2,5,5,5,2,3,1,0},

{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,4,4,4,4,4,4,4,4,4,4,4,3,1,0},
{0,1,4,4,4,4,4,4,4,4,4,4,4,1,0,0},
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

static const unsigned char BTN_PAUSE_UP[16][16] = {
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},

{1,3,2,5,2,5,2,2,2,5,2,5,5,3,1,0}, // PAUSE text
{1,3,2,5,5,2,2,2,2,5,2,2,2,3,1,0},
{1,3,2,5,2,2,2,2,2,5,2,2,2,3,1,0},
{1,3,2,5,2,2,2,2,2,5,2,5,2,3,1,0},
{1,3,2,5,2,2,2,2,2,5,5,5,2,3,1,0},

{1,3,2,2,2,2,2,2,2,2,2,2,2,3,1,0},
{1,3,4,4,4,4,4,4,4,4,4,4,4,3,1,0},
{0,1,4,4,4,4,4,4,4,4,4,4,4,1,0,0},
{0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

void drawStopButtonDown(int x, int y) { drawButton16(x, y, BTN_STOP_DOWN); }
void drawPauseButtonDown(int x, int y) { drawButton16(x, y, BTN_PAUSE_DOWN); }
void drawStopButtonUp(int x, int y) { drawButton16(x, y, BTN_STOP_UP); }
void drawPauseButtonUp(int x, int y) { drawButton16(x, y, BTN_PAUSE_UP); }

/* Convenience wrappers that mirror the old pressed-flag API. */
void drawPlayButton(int x, int y, int pressed) {
    if (pressed) drawPlayButtonDown(x, y);
    else drawPlayButtonUp(x, y);
}

void drawStopButton(int x, int y, int pressed) {
    if (pressed) drawStopButtonDown(x, y);
    else drawStopButtonUp(x, y);
}

void drawPauseButton(int x, int y, int pressed) {
    if (pressed) drawPauseButtonDown(x, y);
    else drawPauseButtonUp(x, y);
}
